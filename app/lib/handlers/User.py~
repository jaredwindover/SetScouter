import webapp2

from webapp2_extras.appengine.auth.models import User

class Handler(webapp2.RequestHandler):
    def get(self):
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.write('User Handler');
    def post(self):
        firstname = self.request.get('firstname')
        lastname = self.request.get('lastname')
        email = self.request.get('email')
        password = self.request.get('password')
        work, info = User.create_user(
            email,
            firstname=firstname,
            lastname=lastname,
            password_raw=password
        )
        if not work: #Should actually handle this by returning an error
            print "Failure"
            print info
            return
        user = info
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.write('User Created');
